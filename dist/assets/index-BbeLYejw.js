import{u as N,a as S,f as D}from"./game-Dw5vbGhC.js";import{f as C,a as j}from"./format-GyRy-UB-.js";import{d as A,c as _,a as n,b as t,t as s,u as r,i as m,F as v,e as u,o as i,h as c,n as b,_ as R}from"./index-DHn3yG1W.js";const E={class:"history-page min-h-full p-4 pb-20"},M={key:0,class:"text-center text-gray-500 mt-10"},W={key:1,class:"text-center text-gray-500 mt-10"},B={key:2,class:"space-y-4"},G={class:"mahjong-card"},V={class:"flex items-center justify-between mb-3"},$={class:"text-sm text-gray-500"},F={class:"grid grid-cols-2 gap-2 text-sm"},I={class:"text-gray-600"},L={class:"font-bold text-gray-800"},z={class:"text-gray-600"},H={class:"font-bold text-gray-800"},Y={class:"text-gray-600"},q={class:"font-bold text-gray-800"},J={class:"flex items-start justify-between mb-3"},K={class:"flex items-center gap-2"},O={class:"round-number"},Q={class:"text-xs text-gray-500"},U=["onClick"],X={class:"mb-3"},Z={key:0,class:"flex items-center justify-between text-xs text-gray-600 mb-1"},ee={key:0,class:"text-orange-600 font-bold"},te={key:0},se={key:1,class:"text-blue-600"},ae={class:"flex items-center gap-2 mb-2 flex-wrap"},ne={key:0,class:"win-type-badge draw"},ie={key:0,class:"winner-badge"},oe={key:0,class:"text-xs"},le={class:"tai-badge"},re={key:1,class:"hand-type-badge"},ce={class:"mt-2 text-xs text-gray-500"},de={class:"score-changes"},pe={class:"player-info"},_e=A({__name:"index",setup(me){const d=N(),w=_(()=>d.isGameActive),h=_(()=>d.gameState),y=_(()=>d.currentRounds),f=_(()=>d.currentSettings),g=S,k=D,T=_(()=>[...y.value].reverse());function l(x){var p;const a=(p=h.value)==null?void 0:p.players.find(e=>e.position===x);return a?a.name:""}function P(x){confirm("ç¢ºå®šè¦åˆªé™¤é€™ç­†è¨˜éŒ„å—ï¼Ÿåˆªé™¤å¾Œè©²å±€ä¹‹å¾Œçš„è¨˜éŒ„ä¹Ÿæœƒè¢«ç§»é™¤ã€‚")&&d.deleteRound(x)}return(x,a)=>{var p;return i(),n("div",E,[a[7]||(a[7]=t("h1",{class:"text-2xl font-bold text-center mb-4 text-mahjong-green"}," æ­·å²è¨˜éŒ„ ",-1)),w.value?y.value.length===0?(i(),n("div",W,[...a[1]||(a[1]=[t("p",{class:"text-4xl mb-3"},"ğŸ®",-1),t("p",null,"å°šæœªæœ‰ä»»ä½•è¨˜éŒ„",-1),t("p",{class:"text-sm mt-2"},"é–‹å§‹è¨˜éŒ„ç¬¬ä¸€å±€å§ï¼",-1)])])):(i(),n("div",B,[t("div",G,[t("div",V,[a[2]||(a[2]=t("h2",{class:"font-bold text-gray-800"},"éŠæˆ²è³‡è¨Š",-1)),t("span",$,s(r(C)(((p=h.value)==null?void 0:p.startTime)||0)),1)]),t("div",F,[t("div",I,[a[3]||(a[3]=m(" ç¸½å±€æ•¸ï¼š",-1)),t("span",L,s(y.value.length),1)]),t("div",z,[a[4]||(a[4]=m(" åº•åˆ†ï¼š",-1)),t("span",H,s(f.value.basePoint)+" å…ƒ",1)]),t("div",Y,[a[5]||(a[5]=m(" åº•ï¼š",-1)),t("span",q,s(f.value.baseMultiplier)+" åº•",1)])])]),(i(!0),n(v,null,u(T.value,e=>(i(),n("div",{key:e.id,class:"round-card mahjong-card"},[t("div",J,[t("div",K,[t("span",O,"ç¬¬ "+s(e.roundNumber)+" å±€",1),t("span",Q,s(r(j)(e.timestamp)),1)]),t("button",{onClick:o=>P(e.id),class:"text-red-500 text-xs px-2 py-1 hover:bg-red-50 rounded transition-colors"}," åˆªé™¤ ",8,U)]),t("div",X,[e.dealerPosition?(i(),n("div",Z,[t("span",null,"èŠå®¶ï¼š"+s(r(g)[e.dealerPosition])+" "+s(l(e.dealerPosition)),1),e.isDealerWin?(i(),n("span",ee,[a[6]||(a[6]=m(" â†’ é€£èŠ",-1)),e.dealerWinCount?(i(),n("span",te,"("+s(e.dealerWinCount)+"é€£)",1)):c("",!0)])):e.nextDealer?(i(),n("span",se," â†’ "+s(r(g)[e.nextDealer])+" "+s(l(e.nextDealer)),1)):c("",!0)])):c("",!0),t("div",ae,[e.winType==="draw"?(i(),n("span",ne," æµå±€ ")):(i(),n(v,{key:1},[e.winType==="self_draw"?(i(),n("span",ie,[m(s(l(e.winnerPosition))+" ",1),e.dealerPosition===e.winnerPosition?(i(),n("span",oe,"ï¼ˆèŠï¼‰")):c("",!0)])):c("",!0),t("span",{class:b(["win-type-badge",e.winType])},s(e.winType==="self_draw"?"è‡ªæ‘¸":`${l(e.winnerPosition)} èƒ¡ ${l(e.loserPosition)}`),3),t("span",le,s(e.tai)+" å°",1),e.handTypes&&e.handTypes.length>0?(i(),n("span",re,s(e.handTypes.map(o=>r(k)[o]).join("+")),1)):c("",!0)],64))])]),t("div",ce," è¨ˆç®—ï¼š("+s(e.baseMultiplier)+"åº• + "+s(e.tai)+"å°) Ã— "+s(e.basePoint)+"å…ƒ/å° ",1),t("div",de,[(i(!0),n(v,null,u(e.scoreChanges,o=>(i(),n("div",{key:o.position,class:"score-change-item"},[t("span",pe,s(r(g)[o.position])+" "+s(l(o.position)),1),t("span",{class:b(["score-value",{positive:o.change>0,negative:o.change<0}])},s(o.change>0?"+":"")+s(o.change.toLocaleString()),3)]))),128))])]))),128))])):(i(),n("div",M,[...a[0]||(a[0]=[t("p",{class:"text-4xl mb-3"},"ğŸ“‹",-1),t("p",null,"ç›®å‰æ²’æœ‰é€²è¡Œä¸­çš„éŠæˆ²",-1),t("p",{class:"text-sm mt-2"},"è«‹å…ˆé–‹å§‹æ–°éŠæˆ²",-1)])]))])}}}),ve=R(_e,[["__scopeId","data-v-03e82531"]]);export{ve as default};
